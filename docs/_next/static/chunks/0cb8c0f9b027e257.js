(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31713,e=>{"use strict";var r=e.i(43476),i=e.i(71645);let d={parentConsent:!1,gradeBand:"",recipientName:"",postalCode:"",address1:"",address2:"",phone:"",q1:"",q2:"",q3:""};function n(e){return e.replace(/[^\d]/g,"")}function t(){let[e,t]=(0,i.useState)(d),[s,o]=(0,i.useState)(""),[l,a]=(0,i.useState)(!1),p=(0,i.useMemo)(()=>["parentConsent","gradeBand","recipientName","postalCode","address1","address2","phone","q1","q2"],[]),c=(0,i.useMemo)(()=>{let r=0;for(let i of p){let d=e[i];"boolean"==typeof d?d&&r++:String(d).trim().length>0&&r++}return r},[e,p]),h=(0,i.useMemo)(()=>Math.max(0,Math.min(100,Math.round(c/p.length*95+5*(e.q3.trim().length>=5)))),[c,p.length,e.q3]),g=(0,i.useMemo)(()=>{let r=c===p.length,i=n(e.phone).length>=10,d=7===n(e.postalCode).length;return e.parentConsent&&r&&i&&d&&!l},[c,e.parentConsent,e.phone,e.postalCode,p.length,l]),x=(0,i.useMemo)(()=>h>=100?"完璧！バッジ目前！":h>=80?"いいね！あと少し！":h>=50?"その調子！":h>=20?"いいスタート！":"まずはやってみよう！",[h]),u=(e,r)=>{t(i=>({...i,[e]:r}))},b=async r=>{r.preventDefault(),a(!0),o("送信中…");let i={issue:"00",submittedAt:new Date().toISOString(),...e,phoneDigits:n(e.phone),postalCodeDigits:n(e.postalCode)};try{await fetch("https://script.google.com/macros/s/AKfycbwpkDSnXJi63Tya7JQWctn3FxgQnIvpCHktseKTrnEnT2YzvcpMh7Ece65M_QjvGYT0pg/exec",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o("送信しました。ありがとうございました。バッジを準備します！"),t(d),r.currentTarget.reset?.()}catch{o("送信に失敗しました。時間をおいて試してください。")}finally{a(!1)}};return(0,r.jsxs)("main",{style:{padding:"2rem",maxWidth:720,margin:"0 auto"},children:[(0,r.jsx)("h1",{style:{marginBottom:8},children:"バッジがもらえるアンケート"}),(0,r.jsx)("p",{style:{marginTop:0,color:"#6b7280"},children:"1ページで完結。入力に合わせてゲージが進むよ。"}),(0,r.jsxs)("div",{style:{margin:"16px 0",padding:12,borderRadius:14,background:"rgba(0,0,0,.04)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,r.jsx)("span",{style:{fontSize:12,color:"#6b7280"},children:"進みぐあい"}),(0,r.jsxs)("strong",{children:[h,"%"]})]}),(0,r.jsx)("div",{style:{height:12,borderRadius:999,background:"#e5e7eb",overflow:"hidden",marginTop:8},children:(0,r.jsx)("div",{style:{height:"100%",width:`${h}%`,background:"#111827",transition:"width .25s ease"}})}),(0,r.jsx)("div",{style:{marginTop:8,fontSize:13,color:"#374151"},children:x})]}),(0,r.jsxs)("form",{onSubmit:b,style:{display:"grid",gap:14},children:[(0,r.jsxs)("section",{style:{padding:14,borderRadius:14,background:"rgba(255,255,255,.9)",border:"1px solid #e5e7eb"},children:[(0,r.jsx)("h2",{style:{margin:"0 0 8px",fontSize:16},children:"保護者の方へ（必須）"}),(0,r.jsx)("p",{style:{margin:0,color:"#6b7280",fontSize:13,lineHeight:1.5},children:"住所・電話番号はバッジ郵送のために使用します。目的外利用はしません。 （詳しくはプライバシーポリシーをご確認ください）"}),(0,r.jsxs)("label",{style:{display:"flex",gap:10,alignItems:"flex-start",marginTop:10},children:[(0,r.jsx)("input",{type:"checkbox",checked:e.parentConsent,onChange:e=>u("parentConsent",e.target.checked),required:!0}),(0,r.jsx)("span",{children:"保護者として、上記に同意します"})]}),(0,r.jsx)("a",{href:"/odoru/privacy",style:{fontSize:13,textDecoration:"underline",color:"#111827"},children:"プライバシーポリシー"})]}),(0,r.jsxs)("section",{style:{padding:14,borderRadius:14,background:"#fff",border:"1px solid #e5e7eb"},children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:6},children:"学年（必須）"}),(0,r.jsxs)("select",{value:e.gradeBand,onChange:e=>u("gradeBand",e.target.value),required:!0,style:{width:"100%",padding:12,borderRadius:12,border:"1px solid #e5e7eb"},children:[(0,r.jsx)("option",{value:"",children:"えらんでね"}),(0,r.jsx)("option",{value:"小1-2",children:"小1・小2"}),(0,r.jsx)("option",{value:"小3-4",children:"小3・小4"}),(0,r.jsx)("option",{value:"小5-6",children:"小5・小6"})]})]}),(0,r.jsxs)("section",{style:{padding:14,borderRadius:14,background:"#fff",border:"1px solid #e5e7eb"},children:[(0,r.jsx)("h2",{style:{margin:"0 0 8px",fontSize:16},children:"バッジの送り先（必須）"}),(0,r.jsxs)("div",{style:{display:"grid",gap:10},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:6},children:"宛名（必須）"}),(0,r.jsx)("input",{value:e.recipientName,onChange:e=>u("recipientName",e.target.value),required:!0,placeholder:"例：土屋 光巨（保護者）",style:{width:"100%",padding:12,borderRadius:12,border:"1px solid #e5e7eb"}})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:10},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:6},children:"郵便番号（必須）"}),(0,r.jsx)("input",{value:e.postalCode,onChange:e=>u("postalCode",e.target.value),required:!0,inputMode:"numeric",placeholder:"例：2200011",style:{width:"100%",padding:12,borderRadius:12,border:"1px solid #e5e7eb"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:6},children:"電話番号（必須）"}),(0,r.jsx)("input",{value:e.phone,onChange:e=>u("phone",e.target.value),required:!0,inputMode:"tel",placeholder:"例：080-1234-5678",style:{width:"100%",padding:12,borderRadius:12,border:"1px solid #e5e7eb"}}),(0,r.jsx)("p",{style:{margin:"6px 0 0",color:"#6b7280",fontSize:12},children:"※ハイフンありでもOK"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:6},children:"住所（都道府県・市区町村）（必須）"}),(0,r.jsx)("input",{value:e.address1,onChange:e=>u("address1",e.target.value),required:!0,placeholder:"例：神奈川県横浜市西区高島",style:{width:"100%",padding:12,borderRadius:12,border:"1px solid #e5e7eb"}})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{style:{display:"block",fontSize:13,marginBottom:6},children:"番地・建物名（必須）"}),(0,r.jsx)("input",{value:e.address2,onChange:e=>u("address2",e.target.value),required:!0,placeholder:"例：1-2-5 横濱ゲートタワー19階",style:{width:"100%",padding:12,borderRadius:12,border:"1px solid #e5e7eb"}})]})]})]}),(0,r.jsxs)("section",{style:{padding:14,borderRadius:14,background:"#fff",border:"1px solid #e5e7eb"},children:[(0,r.jsx)("h2",{style:{margin:"0 0 8px",fontSize:16},children:"しつもん"}),(0,r.jsxs)("div",{style:{marginTop:12},children:[(0,r.jsx)("p",{style:{margin:0,fontWeight:700},children:"Q1. この号はどうだった？（必須）"}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:10,marginTop:10},children:["とても","まあまあ","ふつう","むずかしい"].map(i=>(0,r.jsx)("button",{type:"button",onClick:()=>u("q1",i),style:{padding:"10px 12px",borderRadius:12,border:e.q1===i?"1px solid #111827":"1px solid #e5e7eb",background:"#fff",boxShadow:e.q1===i?"0 10px 20px rgba(17,24,39,.10)":"none",cursor:"pointer"},children:i},i))}),(0,r.jsx)("input",{type:"hidden",name:"q1",value:e.q1,required:!0})]}),(0,r.jsxs)("div",{style:{marginTop:16},children:[(0,r.jsx)("p",{style:{margin:0,fontWeight:700},children:"Q2. またやりたい？（必須）"}),(0,r.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:10,marginTop:10},children:["またやりたい","またやるかも","わからない"].map(i=>(0,r.jsx)("button",{type:"button",onClick:()=>u("q2",i),style:{padding:"10px 12px",borderRadius:12,border:e.q2===i?"1px solid #111827":"1px solid #e5e7eb",background:"#fff",boxShadow:e.q2===i?"0 10px 20px rgba(17,24,39,.10)":"none",cursor:"pointer"},children:i},i))}),(0,r.jsx)("input",{type:"hidden",name:"q2",value:e.q2,required:!0})]}),(0,r.jsxs)("div",{style:{marginTop:16},children:[(0,r.jsx)("label",{style:{display:"block",fontWeight:700},children:"Q3. つぎに入れてほしいこと（任意）"}),(0,r.jsx)("textarea",{value:e.q3,onChange:e=>u("q3",e.target.value),rows:4,placeholder:"例：もっとクイズをふやして！など",style:{width:"100%",marginTop:10,padding:12,borderRadius:12,border:"1px solid #e5e7eb"}})]})]}),(0,r.jsx)("button",{type:"submit",disabled:!g,style:{padding:"14px 14px",borderRadius:14,border:"1px solid #111827",background:g?"#111827":"rgba(17,24,39,.45)",color:"#fff",fontWeight:800,cursor:g?"pointer":"not-allowed"},children:l?"送信中…":"バッジを受け取る！"}),s&&(0,r.jsx)("p",{style:{marginTop:6},children:s}),(0,r.jsx)("p",{style:{marginTop:0,color:"#6b7280",fontSize:12},children:"※現在の送信方式（no-cors）は「送信成功」を厳密に判定できません。住所・電話必須運用なら、次のステップでCORS対応またはNext.js API経由に切替推奨です。"})]})]})}e.s(["default",()=>t])}]);